<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vote | åƒèˆ‡æ±ºç­– - FL</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="åƒèˆ‡FLç¶²ç«™çš„æ±ºç­–éç¨‹ï¼ŒæŠ•ç¥¨æ±ºå®šä¸‹ä¸€å€‹åŠŸèƒ½æˆ–è¨­è¨ˆæ–¹å‘ã€‚é€™æ˜¯ä¸€å€‹ç”±ä¸€äººèˆ‡AIå…±åŒæ‰“é€ çš„å¯¦é©—ç¶²ç«™ã€‚">
    <meta name="keywords" content="ç¶²ç«™æŠ•ç¥¨, åŠŸèƒ½æ±ºç­–, AIå…±å‰µ, FL, Free Life, åƒèˆ‡å¼è¨­è¨ˆ">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Vote | åƒèˆ‡æ±ºç­– - FL">
    <meta property="og:description" content="ä½ çš„æ¯ä¸€ç¥¨ï¼Œéƒ½æ±ºå®šäº† FL ä¸‹ä¸€æ­¥ç”Ÿé•·çš„æ–¹å‘ã€‚ä¾†æŠ•ç¥¨æ±ºå®šä¸‹ä¸€å€‹åŠŸèƒ½å§ï¼">
    <meta property="og:type" content="website">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        green: {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            200: '#bbf7d0',
                            300: '#86efac',
                            400: '#4ade80',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d',
                            800: '#166534',
                            900: '#14532d',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ç°¡å–®ç”Ÿé•·å‹•ç•« */
        @keyframes grow { from { transform: scale(0.98); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .animate-grow { animation: grow 0.8s ease-out; }
        
        /* æŠ•ç¥¨å½ˆè·³å‹•ç•« */
        @keyframes bounce-vote { 
            0%, 100% { transform: scale(1); } 
            50% { transform: scale(1.05); } 
        }
        .voted-animation { animation: bounce-vote 0.4s ease-in-out; }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 via-white to-green-50 font-sans text-gray-800 transition-colors duration-300 min-h-screen flex flex-col dark:from-gray-900 dark:via-gray-900 dark:to-green-900 dark:text-gray-100">

    <!-- Navigation -->
    <nav class="bg-green-700 text-white p-4 shadow-lg fixed w-full top-0 z-50 dark:bg-green-900 backdrop-blur-sm bg-opacity-95">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold tracking-wider flex items-center">
                <i class="fas fa-leaf mr-2"></i> FL
            </h1>
            <ul class="flex space-x-6 items-center text-sm md:text-base">
                <li><a href="index.html" class="hover:text-green-200 transition">é¦–é </a></li>
                <li><a href="build_log.html" class="hover:text-green-200 transition">å»ºé€ ç´€éŒ„</a></li>
                <li><a href="vote.html" class="hover:text-green-200 transition border-b-2 border-white font-semibold">æŠ•ç¥¨</a></li>
                <li><a href="community.html" class="hover:text-green-200 transition">ç¤¾ç¾¤</a></li>
                <li>
                    <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-green-600 transition" title="åˆ‡æ›æ·±è‰²æ¨¡å¼">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:inline"></i>
                    </button>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow pt-24 px-4 pb-12">
        <div class="max-w-3xl mx-auto animate-grow">
            
            <!-- Page Title -->
            <div class="text-center mb-10">
                <h1 class="text-4xl font-bold text-green-800 mb-3 dark:text-green-400">æ±ºç­–å¯¦é©—å®¤</h1>
                <p class="text-gray-600 dark:text-gray-300">é€™è£¡æ²’æœ‰é»‘ç®±ï¼Œåªæœ‰ç¤¾ç¾¤çš„æ„å¿—ã€‚ä½ çš„é»æ“Šæ±ºå®š FL çš„ä¸‹ä¸€è¡Œä»£ç¢¼ã€‚</p>
            </div>

            <!-- Rules Section (v0.1) -->
            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-6 mb-10 rounded-r-xl shadow-sm dark:bg-yellow-900/20 dark:border-yellow-500">
                <h2 class="text-lg font-bold mb-3 flex items-center text-yellow-800 dark:text-yellow-200">
                    <i class="fas fa-clipboard-list mr-2"></i> æŠ•ç¥¨è¦å‰‡ v0.1
                </h2>
                <ul class="list-none space-y-2 text-sm text-yellow-900 dark:text-yellow-100/90">
                    <li class="flex items-start"><i class="fas fa-check mt-1 mr-2 text-yellow-600"></i> æ¯ä½ç”¨æˆ¶ï¼ˆåŒä¸€ç€è¦½å™¨ï¼‰å°æ¯å€‹æƒ³æ³•é™æŠ• 1 ç¥¨ã€‚</li>
                    <li class="flex items-start"><i class="fas fa-check mt-1 mr-2 text-yellow-600"></i> <strong>ç„¡æ³•æ’¤éŠ·</strong>ï¼šè«‹æ…é‡ä½¿ç”¨ä½ çš„æ¬Šåˆ©ã€‚</li>
                    <li class="flex items-start"><i class="fas fa-check mt-1 mr-2 text-yellow-600"></i> <strong>æ•¸æ“šçœŸå¯¦</strong>ï¼šç›´æ¥å­˜æ–¼ LocalStorageï¼Œé€™æ˜¯ä¸€å€‹å»ä¸­å¿ƒåŒ–çš„ä¿¡ä»»å¯¦é©—ã€‚</li>
                    <li class="flex items-start"><i class="fas fa-check mt-1 mr-2 text-yellow-600"></i> <strong>è¡Œå‹•æ‰¿è«¾</strong>ï¼šç´¯è¨ˆè¶…é 10 ç¥¨çš„æƒ³æ³•ï¼Œå°‡è¢«æ¨™è¨˜ç‚ºã€Œè¨ˆåŠƒä¸­ã€ä¸¦å„ªå…ˆé–‹ç™¼ã€‚</li>
                    <li class="flex items-start"><i class="fas fa-check mt-1 mr-2 text-yellow-600"></i> ä½œå¼Šè¡Œç‚ºï¼ˆå¦‚æ¸…é™¤ç·©å­˜åˆ·ç¥¨ï¼‰å°‡è¢«è¦–ç‚ºå°äººé¡æœ¬æ€§çš„æ¸¬è©¦ ğŸ˜‚</li>
                </ul>
            </div>

            <!-- Submission Form -->
            <div class="bg-white p-6 rounded-2xl shadow-lg mb-10 border border-green-100 dark:bg-gray-800 dark:border-gray-700">
                <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center dark:text-gray-100">
                    <i class="fas fa-plus-circle text-green-600 mr-2"></i> ç™¼èµ·æ–°ææ¡ˆ
                </h2>
                <form id="idea-form" class="flex flex-col md:flex-row gap-3">
                    <input id="idea-input" type="text" class="flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="ä¾‹å¦‚ï¼šå¢åŠ ã€Œç•ªèŒ„é˜ã€åŠŸèƒ½..." required>
                    <button type="submit" class="bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 transition font-bold shadow-md active:transform active:scale-95 dark:bg-green-500 dark:hover:bg-green-600 whitespace-nowrap">
                        æäº¤æƒ³æ³•
                    </button>
                </form>
            </div>

            <!-- Voting List -->
            <div class="space-y-6" id="idea-list">
                <!-- Ideas injected by JS -->
                <div class="text-center py-12">
                    <i class="fas fa-circle-notch fa-spin text-3xl text-green-500"></i>
                    <p class="mt-4 text-gray-500">æ­£åœ¨è®€å–ç¤¾ç¾¤æ™ºæ…§...</p>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer with Social Share -->
    <footer class="bg-gray-800 text-gray-400 py-10 mt-auto dark:bg-gray-950">
        <div class="container mx-auto px-4 text-center">
            
            <div class="mb-8">
                <h3 class="text-white font-bold mb-4 text-lg">è®“æ›´å¤šäººåƒèˆ‡å¯¦é©—</h3>
                <button onclick="shareToX()" class="bg-black hover:bg-gray-900 text-white px-6 py-3 rounded-full font-bold transition shadow-lg inline-flex items-center gap-2 border border-gray-700">
                    <i class="fab fa-x-twitter text-xl"></i> åˆ†äº«åˆ° X
                </button>
                <p class="text-xs mt-2 text-gray-500">è‡ªå‹•å¸¶å…¥ Hashtag #FreeLifeExperiment</p>
            </div>

            <div class="border-t border-gray-700 pt-6">
                <span class="inline-block bg-gray-700 px-3 py-1 rounded-full text-xs mb-3">
                    ğŸš§ ç¶²ç«™æŒçºŒé€²åŒ–ä¸­ | System Status: Evolving
                </span>
                <p class="text-xs">&copy; 2026 FL. Built with Human-AI Collaboration.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Dark Mode ---
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('fl-theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
        }
        if (localStorage.getItem('fl-theme') === 'dark' || (!('fl-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        }

        // --- Core Voting Logic ---
        
        // Initial Data (The 3 Core Ideas)
        const initialIdeas = [
            { id: 1, text: "å€‹äººæœƒå“¡ä¸­å¿ƒ", votes: 0 },
            { id: 2, text: "å®Œæ•´çš„æ•…äº‹ç•™è¨€æ¿åŠŸèƒ½", votes: 0 },
            { id: 3, text: "ç¶²ç«™æ·±è‰²æ¨¡å¼ (Dark Mode)", votes: 0 }
        ];

        // State Management
        let ideas = JSON.parse(localStorage.getItem('fl_ideas')) || initialIdeas;
        let votedIds = JSON.parse(localStorage.getItem('fl_voted_ids')) || [];

        // Data Migration Check (if old data format exists)
        if (!ideas[0].id) {
            ideas = initialIdeas;
            localStorage.setItem('fl_ideas', JSON.stringify(ideas));
        }

        function saveData() {
            localStorage.setItem('fl_ideas', JSON.stringify(ideas));
            localStorage.setItem('fl_voted_ids', JSON.stringify(votedIds));
        }

        // Add Idea
        document.getElementById('idea-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const input = document.getElementById('idea-input');
            const text = input.value.trim();
            
            if (text) {
                const newId = ideas.length > 0 ? Math.max(...ideas.map(i => i.id)) + 1 : 1;
                ideas.push({ id: newId, text: text, votes: 0 });
                saveData();
                renderIdeas();
                input.value = '';
                
                // Visual feedback
                const notification = document.createElement('div');
                notification.className = 'fixed top-20 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-xl animate-bounce z-50';
                notification.innerHTML = '<i class="fas fa-check-circle mr-2"></i> æƒ³æ³•å·²æäº¤ï¼';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
            }
        });

        // Share Helper
        function shareIdea(text, votes) {
            const url = encodeURIComponent(window.location.href);
            const msg = encodeURIComponent(`æˆ‘åœ¨ FL æŠ•çµ¦äº†ã€Œ${text}ã€ï¼ç›®å‰å·²æœ‰ ${votes} ç¥¨ã€‚ä¾†åƒèˆ‡æ±ºç­–å§ï¼ #FreeLifeExperiment`);
            window.open(`https://twitter.com/intent/tweet?text=${msg}&url=${url}`, '_blank');
        }

        // Vote Action
        window.handleVote = function(id) {
            if (votedIds.includes(id)) return;

            const idea = ideas.find(i => i.id === id);
            if (idea) {
                idea.votes++;
                votedIds.push(id);
                saveData();
                
                // Visual feedback
                const btn = document.getElementById(`vote-btn-${id}`);
                if (btn) {
                    btn.innerHTML = '<i class="fas fa-check"></i> å·²æŠ•';
                    btn.classList.add('voted-animation');
                }
                
                renderIdeas();

                // Milestone Trigger (>5 votes)
                if (idea.votes === 6) { 
                     alert(`ğŸ”¥ å¤ªæ£’äº†ï¼ã€Œ${idea.text}ã€ç¥¨æ•¸å‰›å‰›çªç ´ 5 ç¥¨ï¼\n\né€™æ˜¯ä¸€å€‹é‡è¦çš„é‡Œç¨‹ç¢‘ï¼Œå®ƒå°‡è‡ªå‹•å‡ºç¾åœ¨é¦–é çš„ã€Œç†±é–€æƒ³æ³•ã€å€ï¼Œä¸¦é€šçŸ¥é–‹ç™¼è€…å„ªå…ˆè™•ç†ï¼`);
                } else {
                    if(confirm('æ„Ÿè¬æŠ•ç¥¨ï¼åˆ†äº«çµ¦æœ‹å‹ï¼Œè®“ FL æ›´å¿«ç”Ÿé•·ï¼Ÿ')) {
                        shareIdea(idea.text, idea.votes);
                    }
                }
            }
        };

        // Render List
        function renderIdeas() {
            const list = document.getElementById('idea-list');
            list.innerHTML = '';

            const sortedIdeas = [...ideas].sort((a, b) => b.votes - a.votes);

            sortedIdeas.forEach((idea, index) => {
                const isVoted = votedIds.includes(idea.id);
                const isTop3 = index < 3;
                const isTrending = idea.votes >= 10;
                
                // Dynamic Styles
                let cardClass = "bg-white p-5 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between transition hover:shadow-md dark:bg-gray-800 dark:border-gray-700";
                let rankBadge = `<span class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-500 font-bold text-sm dark:bg-gray-700 dark:text-gray-400">#${index + 1}</span>`;
                
                if (index === 0) {
                    cardClass += " border-l-4 border-l-yellow-400 ring-1 ring-yellow-100 dark:ring-yellow-900";
                    rankBadge = `<span class="w-8 h-8 flex items-center justify-center rounded-full bg-yellow-100 text-yellow-700 font-bold text-sm ring-2 ring-yellow-200 dark:bg-yellow-900 dark:text-yellow-200">ğŸ¥‡</span>`;
                } else if (index === 1) {
                    rankBadge = `<span class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-200 text-gray-700 font-bold text-sm dark:bg-gray-600 dark:text-gray-200">ğŸ¥ˆ</span>`;
                } else if (index === 2) {
                    rankBadge = `<span class="w-8 h-8 flex items-center justify-center rounded-full bg-orange-100 text-orange-800 font-bold text-sm dark:bg-orange-900 dark:text-orange-200">ğŸ¥‰</span>`;
                }

                const item = document.createElement('div');
                item.className = cardClass;
                
                // Status Badges
                let badges = '';
                if (isTrending) badges += `<span class="ml-2 text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full font-bold"><i class="fas fa-fire"></i> ç†±é–€</span>`;
                if (isVoted) badges += `<span class="ml-2 text-xs bg-green-100 text-green-600 px-2 py-0.5 rounded-full font-bold"><i class="fas fa-check"></i> å·²æŠ•</span>`;

                // Button State
                const btnClass = isVoted 
                    ? "bg-gray-100 text-gray-400 cursor-not-allowed px-4 py-2 rounded-lg font-bold text-sm border border-gray-200 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-500"
                    : "bg-green-50 text-green-700 hover:bg-green-600 hover:text-white border border-green-200 px-4 py-2 rounded-lg font-bold text-sm transition dark:bg-green-900/30 dark:border-green-800 dark:text-green-400 dark:hover:bg-green-600 dark:hover:text-white";

                const btnText = isVoted ? 'å·²æŠ•' : 'æŠ•ç¥¨';

                item.innerHTML = `
                    <div class="flex items-center gap-4 flex-1">
                        ${rankBadge}
                        <div class="flex flex-col">
                            <h3 class="font-bold text-gray-800 text-lg dark:text-gray-100 flex items-center flex-wrap">
                                ${idea.text} ${badges}
                            </h3>
                            <div class="text-xs text-gray-500 mt-1 dark:text-gray-400">
                                ç›®å‰ç¥¨æ•¸: <span class="font-bold text-green-600 dark:text-green-400">${idea.votes}</span>
                            </div>
                        </div>
                    </div>
                    <button id="vote-btn-${idea.id}" onclick="handleVote(${idea.id})" ${isVoted ? 'disabled' : ''} class="${btnClass}">
                        ${isVoted ? '<i class="fas fa-check"></i>' : '<i class="fas fa-thumbs-up"></i>'} ${btnText}
                    </button>
                `;
                list.appendChild(item);
            });
        }

        // --- Social Share Logic (Share to X) ---
        window.shareToX = function() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent("æˆ‘æ­£åœ¨ FL ç¶²ç«™åƒèˆ‡ç¶²ç«™æœªä¾†çš„æŠ•ç¥¨æ±ºç­–ï¼é€™æ˜¯ä¸€å€‹ç”±äººæ©Ÿå…±å‰µçš„è‡ªç”±å¯¦é©—ã€‚ #FreeLifeExperiment #FL #AI");
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
        };

        // Init
        renderIdeas();

    </script>
</body>
</html>
